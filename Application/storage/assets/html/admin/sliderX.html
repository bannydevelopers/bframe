<div class="slanted-banner">
    <div class="flex content">
        <div class="white-txt content center" style="flex-basis: 100%;margin-top: 2em;">
            <div class="large-txt-2x text-shadow">Meet the  perfect handyman.</div>
            <div>
                <form method="get" style="padding: 1em 0;max-width: 520px;margin:auto;" autocomplete="off" onsubmit="return check_entries()">
                    <div class="flex large-txt content-small border-fy" style="border: 1px solid #fff;border-radius: 6px;background-color: rgba(0, 0, 0, .3);display: flex;">
                        <div style="flex-basis: 100%;"  id="taccler-search-form">
                            <input class="white" type="search" name="q" placeholder="I need someone for..." required>
                            <div>...type to see suggestion!</div>
                        </div>&nbsp;
                        <div>
                            <button style="background-color: #17C788;color: #fff;border: 1px solid #fff;" disabled>Search</button>
                        </div>
                    </div>
                    <div class="small-txt left" style="margin-top: 1em;">
                        <b>Popular tasks</b><br>
                        <div class="buttons-plain">
                            <a href="" class="white-txt">Garden design</a>
                            <a href="" class="white-txt">Heavy lifting</a>
                            <a href="" class="white-txt">Furniture repair</a>
                            <a href="" class="white-txt no-border">More...</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="center content" style="flex-basis: 100%;">
            <img src="app/storage/uploads/images/oie_transparent.png" width="60%" />
        </div>
    </div>
</div>
<style>
    .slanted-banner{
        background:linear-gradient(60deg, #000 8%, #62b4e7 8%, #62b4e7 65%, rgba(158, 198, 230, 0.753) 65%, #9EC5E6 67%, #ddd 67%);
    }
    .buttons-plain > *{
        display: inline-block;
        border: 1px solid #fff;
        border-radius: 4px;
        padding: .3em 1em;
        margin-top: .6em;
    }
    .buttons-plain .no-border{
        border: none;
    }
    a.white-txt{
        color: #fff;
    }
    .text-shadow{
        text-shadow:  0 0 2px #999;
    }
    #taccler-search-form{
        position: relative;
    }
    #taccler-search-form > div{
        position: absolute;
        width: 100%;
        background-color: #f5f5f5;
        box-shadow: 0 0 4px #999;
        text-align: left;
        padding: .5em;
        font-size: 70%;
        color: #555;
        display: none;
    }
    #taccler-search-form > div.focused{
        display: block;
    }
    #taccler-search-form a{
        display: block;
    }
    form button:disabled{
        cursor: not-allowed;
    }
</style>
<script>
    let sb = document.querySelector('#taccler-search-form > input'),
        sp = document.querySelector('#taccler-search-form > div');
    let bak = sp.innerHTML;
    sb.addEventListener('focus', evt=>{
        sb.value = '';
        sp.parentElement.nextElementSibling.children[0].setAttribute('disabled', true);
        sp.classList.add('focused');
    });
    sb.addEventListener('keyup', evt=>{
        evt.preventDefault();
        let fd = new FormData();
        fd.append('q', sb.value);
        request_service(
            'search_tasks',
            (response, error)=>{
                if(error == null){
                    let resp = JSON.parse(response);
                    sp.innerHTML = resp.response[0]['content'];
                }
                else console.log(error);
            },
            fd
        );
    });
    sb.addEventListener('blur', evt=>{
        setTimeout(()=>{
            sp.classList.remove('focused');
            sp.innerHTML = bak;
        },500);
    });
    sp.addEventListener('click', evt=>{
        //evt.preventDefault();
        //sp.parentElement.nextElementSibling.children[0].removeAttribute('disabled');
        //alert(evt.target.innerHTML);
    });
    const check_entries = ()=>{
        return false;
    }
</script>